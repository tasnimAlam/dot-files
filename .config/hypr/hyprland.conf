################
### MONITORS ###
################

monitor=eDP-1, 1920x1080, 1920x0, 1

#################
### AUTOSTART ###
#################

# Execute your favorite apps at launch
exec-once = hyprpaper 
exec-once = mako
exec-once = waybar
exec-once = hypridle
exec-once = hyprpm enable split-monitor-workspaces
exec-once = kdeconnectd
exec-once = kdeconnect-indicator
exec-once = vicinae server & disown 
exec-once = fcitx5 -d &
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = wl-paste --type text --watch cliphist store #Stores only text data
exec-once = wl-paste --type image --watch cliphist store #Stores only image data
exec-once = nmcli connection down wg0 # Turn off vpn
exec-once = qs -c hamr


###################
### MY PROGRAMS ###
###################

# Set programs that you use
$terminal = ghostty
$fileManager = yazi
$menu = vicinae toggle
$secondMonitor = hyprctl monitors -j | jq '.[1].name' | tr -d '"'

#############################
### ENVIRONMENT VARIABLES ###
#############################

# See https://wiki.hyprland.org/Configuring/Environment-variables/

# Some default env vars.
env = HYPRCURSOR_THEME,rose-pine-hyprcursor
env = HYPRCURSOR_SIZE,24
env = QT_QPA_PLATFORMTHEME,qt5ct # change to qt6ct if you have that

#############
### INPUT ###
#############

input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options = 
    kb_rules =  

    touchpad {
        natural_scroll = no
    }

    sensitivity = 0.5 # -1.0 - 1.0, 0 means no modification.
    follow_mouse = 1
}


#####################
### LOOK AND FEEL ###
#####################

# Refer to https://wiki.hyprland.org/Configuring/Variables/

general {
    gaps_in = 5
    gaps_out = 20
    border_size = 2
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)

    # layout = scrolling 
    layout = master # master or dwindle

    # Please see https://wiki.hyprland.org/Configuring/Tearing/ before you turn this on
    allow_tearing = false
}

decoration {
    rounding = 10

    blur {
        enabled = true
        size = 3
        passes = 2
        
        # vibrancy = 0.1696
        vibrancy = 0.2
    }
	
	  shadow {
				enabled = true
				range = 4
				render_power = 3
				color = rgba(1a1a1aee)
		}
}

animations {
  enabled = true
  bezier= b0,0,1,0,1.05
  bezier= b1,0,1.1,0,1.05
  
  animation = windows,1,4,b1,slide
  animation = windowsIn,1,4,b0,popin 88%
  animation = windowsOut,1,4,b0,slide
  animation = workspaces,1,3,default,slide
}

dwindle {
    # See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
    pseudotile = true # master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = true # you probably want this
}

master {
    # See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
    new_status = slave
}

gestures {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    # workspace_swipe = false
}

misc {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    force_default_wallpaper = 0 # Set to 0 or 1 to disable the anime mascot wallpapers
}

# Example per-device config
# See https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs for more
device {
    name = epic-mouse-v1
    sensitivity = -0.5

    name = ydotoold-virtual-device-1
    accel_profile = flat
}

##############################
### WINDOWS AND WORKSPACES ###
##############################

# Example windowrule v1
# windowrule = float, ^(kitty)$
# Example windowrule v2
# windowrulev2 = float,class:^(kitty)$,title:^(kitty)$
# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# windowrule = float,^(org.pulseaudio.pavucontrol)$

windowrule {
  name = audio
  float = on
  match:class = ^(org.pulseaudio.pavucontrol)$
}

windowrule {
  name = maximize-window
  suppress_event = maximize
  match:class = .* # You'll probably like this.
}

windowrule {
  name = browser-window
  workspace = 2
  match:class = ^(brave-browser)$
}

windowrule {
  name = slack-window
  workspace = 3
  match:class = ^(Slack)$
}

windowrule {
  name = discord-window
  workspace = 3
  float = on
  match:class = ^(discord)$
}

windowrule {
  name = emacs-window
  workspace = 4
  match:class = ^(Emacs)$
}

windowrule {
  name = vlc-window
  workspace = 5
  match:class = ^(vlc)$
}

windowrule {
  name = mpv-window
  workspace = 5
  match:class = ^(mpv)$
}

windowrule {
  name = office-window
  workspace = 5
  match:class = ^(libreoffice-calc)$
}

windowrule {
  name = virtual-window
  workspace = 6
  match:class = ^(VirtualBox Manager)$
}

windowrule {
  name = foot-window
  workspace = 7
  match:class = ^(foot)$
}

windowrule {
  name = email-window
  workspace = 8
  match:class = ^(thunderbird)$
}

windowrule {
  name = gimp-window
  workspace = 9
  float = on
  match:class = ^(.*gimp.*)$
}

windowrule {
  name = pdf-window
  workspace = 10
  match:class = ^(org.pwmt.zathura)$
}

windowrule {
  name = chrome-window
  workspace = 10
  match:class = ^(Chromium)$
}

windowrule {
  name = firefox-window
  workspace = 10
  match:class = ^(firefox)$
}

windowrule {
  name = crank-window
  workspace = 10
  fullscreen = on
  match:class = ^(crankshaft)$
}

windowrule {
  name = key-window
  pin = on
  float = on
  match:class = "showmethekey-gtk"
}

windowrule {
  name = emulator-window
  float = on
  match:class = ^(Emulator)$
}


workspace = 1, monitor:eDP-1
workspace = 2, monitor:eDP-1
workspace = 3, monitor:eDP-1
workspace = 4, monitor:eDP-1
workspace = 5, monitor:eDP-1
workspace = 6, monitor:eDP-1
workspace = 7, monitor:eDP-1
workspace = 8, monitor:eDP-1
workspace = 9, monitor:eDP-1
workspace = 10, monitor:eDP-1

workspace = 11, monitor:$secondMonitor
workspace = 12, monitor:$secondMonitor
workspace = 13, monitor:$secondMonitor
workspace = 14, monitor:$secondMonitor
workspace = 15, monitor:$secondMonitor
workspace = 16, monitor:$secondMonitor
workspace = 17, monitor:$secondMonitor
workspace = 18, monitor:$secondMonitor
workspace = 19, monitor:$secondMonitor
workspace = 20, monitor:$secondMonitor

plugin {
    split-monitor-workspaces {
        count = 10
        keep_focused = 0
        enable_notifications = 0
    }

    hyprscrolling {
        column_width = 0.5
        fullscreen_on_one_column = true
    }
}


###################
### KEYBINDINGS ###
###################

$mainMod = SUPER # Sets "Windows" key as main modifier

# ===========================================
# BASIC NAVIGATION & WINDOW MANAGEMENT
# ===========================================

# Window focus and movement
bind = $mainMod, H, movefocus, l
bind = $mainMod, J, movefocus, d
bind = $mainMod, K, movefocus, u
bind = $mainMod, L, movefocus, r
bind = $mainMod, TAB, focusurgentorlast

# Window management
bind = $mainMod, W, killactive
bind = $mainMod, M, fullscreen
bind = $mainMod, SPACE, swapnext
bind = $mainMod SHIFT, M, exec, hyprctl dispatch layoutmsg swapwithmaster
bind = $mainMod SHIFT, SPACE, togglesplit
bind = $mainMod SHIFT, SPACE, exec, hyprctl dispatch layoutmsg orientationcycle
bind = $mainMod CONTROL, F, togglefloating

# Window movement
bind = $mainMod ALT, H, movewindow, l
bind = $mainMod ALT, J, movewindow, d
bind = $mainMod ALT, K, movewindow, u
bind = $mainMod ALT, L, movewindow, r

# Window resizing
bind = $mainMod SHIFT, H, resizeactive, -40 0
bind = $mainMod SHIFT, J, resizeactive, 0 40
bind = $mainMod SHIFT, K, resizeactive, 0 -40
bind = $mainMod SHIFT, L, resizeactive, 40 0

# Monitor focus
bind = $mainMod, COMMA, exec, hyprctl dispatch focusmonitor 0
bind = $mainMod, PERIOD, exec, hyprctl dispatch focusmonitor 1

# ===========================================
# APPLICATION LAUNCHERS & PROGRAMS
# ===========================================

# Terminal and file manager
bind = $mainMod, Return, exec, $terminal
bind = $mainMod SHIFT, Return, exec, wezterm
bind = $mainMod, E, exec, raise --class "foot" --launch "foot -e $fileManager"

# Browsers
bind = $mainMod, B, exec, raise --class "brave-browser" --launch brave
bind = $mainMod, O, exec, ~/.config/hypr/scripts/bookmarks

# Menus and launchers
bind = $mainMod, P, exec, $menu
bind = $mainMod CONTROL, P, exec, bemenu-run -i
bind = $mainMod SHIFT, P, global, quickshell:hamrToggle

# Applications
bind = $mainMod, N, exec, $terminal -e nvim ~/notes.txt
bind = $mainMod, O, exec, bash ~/.config/hypr/scripts/togglewindow
bind = $mainMod, SEMICOLON, exec, ~/.config/hypr/scripts/focus

# ===========================================
# WORKSPACE MANAGEMENT
# ===========================================

# Switch workspaces with mainMod + [0-9]
# bind = $mainMod, 1, split-workspace, 1
# bind = $mainMod, 2, split-workspace, 2
# bind = $mainMod, 3, split-workspace, 3
# bind = $mainMod, 4, split-workspace, 4
# bind = $mainMod, 5, split-workspace, 5
# bind = $mainMod, 6, split-workspace, 6
# bind = $mainMod, 7, split-workspace, 7
# bind = $mainMod, 8, split-workspace, 8
# bind = $mainMod, 9, split-workspace, 9
# bind = $mainMod, 0, split-workspace, 10

# Use these when split monitor workspace breaks after update
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
# bind = $mainMod SHIFT, 1, split-movetoworkspacesilent, 1
# bind = $mainMod SHIFT, 2, split-movetoworkspacesilent, 2
# bind = $mainMod SHIFT, 3, split-movetoworkspacesilent, 3
# bind = $mainMod SHIFT, 4, split-movetoworkspacesilent, 4
# bind = $mainMod SHIFT, 5, split-movetoworkspacesilent, 5
# bind = $mainMod SHIFT, 6, split-movetoworkspacesilent, 6
# bind = $mainMod SHIFT, 7, split-movetoworkspacesilent, 7
# bind = $mainMod SHIFT, 8, split-movetoworkspacesilent, 8
# bind = $mainMod SHIFT, 9, split-movetoworkspacesilent, 9
# bind = $mainMod SHIFT, 0, split-movetoworkspacesilent, 10

# Use these when split monitor workspace breaks after update
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Special workspace (scratchpad)
bind = $mainMod, S, togglespecialworkspace, magic
bind = $mainMod SHIFT, S, movetoworkspace, special:magic

# Workspace navigation
bind = $mainMod, I, exec, hyprnome
bind = $mainMod, U, exec, hyprnome --previous
bind = $mainMod SHIFT, I, exec, hyprnome --move
bind = $mainMod SHIFT, U, exec, hyprnome --previous --move

# ===========================================
# SYSTEM CONTROLS
# ===========================================

# Volume control
bind = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +5%
bind = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -5%
bind = , XF86AudioMute, exec, amixer set Master toggle
bind = , XF86AudioMicMute, exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle
bind = $mainMod, bracketright, exec, pactl set-sink-volume @DEFAULT_SINK@ +5%
bind = $mainMod, bracketleft, exec, pactl set-sink-volume @DEFAULT_SINK@ -5%
bind = $mainMod, backslash, exec, amixer set Master toggle

# Brightness control
bind = , XF86MonBrightnessUp, exec, lux -a 5%
bind = , XF86MonBrightnessDown, exec, lux -s 5%

# System functions
bind = $mainMod CONTROL, Q, exit
bind = $mainMod CONTROL, L, exec, hyprlock

# ===========================================
# SPECIAL FEATURES & TOOLS
# ===========================================

# Clipboard and utilities
bind = $mainMod, V, exec, cliphist list | bemenu -l10 | cliphist decode | wl-copy

# Scripts and tools
bind = $mainMod, C, exec, ~/.config/hypr/scripts/config-edit
bind = $mainMod, equal, exec, ~/.config/hypr/scripts/menu-calc
bind = $mainMod CONTROL, K, exec, ~/.config/hypr/scripts/dkill
bind = $mainMod CONTROL, M, exec, ~/.config/hypr/scripts/man
bind = $mainMod CONTROL, SEMICOLON, exec, ~/.config/hypr/scripts/record
bind = $mainMod ALT, P, exec, ~/.config/hypr/scripts/screenshot

# Notes system
bind = $mainMod CONTROL, N, exec, ~/.config/hypr/scripts/quicknote
bind = $mainMod ALT CONTROL, N, exec, ~/.config/hypr/scripts/rmnote
bind = $mainMod ALT, N, exec, ~/.config/hypr/scripts/viewnote

# Device management
bind = $mainMod ALT, M, exec, udiskie-dmenu
bind = $mainMod ALT, b, exec, dmenu-bluetooth
bind = $mainMod CONTROL, i, exec, networkmanager_dmenu

# Hardware keys
bind = , XF86Messenger, exec, raise --class "Slack" --launch "slack"
bind = , XF86Display, exec, bash ~/.config/hypr/scripts/togglewindow

# ===========================================
# MOUSE & CURSOR CONTROLS
# ===========================================

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
bindm = SUPER_CTRL, mouse:272, resizewindow

# Scroll through existing workspaces with mainMod + scroll
# bind = $mainMod, mouse_down, workspace, e+1
# bind = $mainMod, mouse_up, workspace, e-1

# ===========================================
# SUBMAPS
# ===========================================

# Power menu control
bind = $mainMod CONTROL, S, submap, power

submap = power
bind = , S, exec, systemctl poweroff
bind = , R, exec, systemctl reboot
bind = , L, exec, pkill -KILL -u $USER
bind = , escape, submap, reset
submap = reset

# Cursor submap (similar to the Mouse mode in Sway)
submap = cursor

# Jump cursor to a position
bind = , a, exec, hyprctl dispatch submap reset && wl-kbptr && hyprctl dispatch submap cursor

# Cursor movement
binde = , j, exec, wlrctl pointer move 0 10
binde = , k, exec, wlrctl pointer move 0 -10
binde = , l, exec, wlrctl pointer move 10 0
binde = , h, exec, wlrctl pointer move -10 0

# Mouse clicks
bind = , comma, exec, wlrctl pointer click left
bind = , m, exec, wlrctl pointer click middle
bind = , period, exec, wlrctl pointer click right

# Scroll up and down
binde = , e, exec, wlrctl pointer scroll 10 0
binde = , r, exec, wlrctl pointer scroll -10 0

# Scroll left and right
binde = , t, exec, wlrctl pointer scroll 0 -10
binde = , g, exec, wlrctl pointer scroll 0 10

# Exit cursor submap
bind = , escape, exec, hyprctl keyword cursor:inactive_timeout 3; hyprctl keyword cursor:hide_on_key_press true; hyprctl dispatch submap reset

submap = reset

# Entrypoint for cursor mode
bind = $mainMod, g, exec, hyprctl keyword cursor:inactive_timeout 0; hyprctl keyword cursor:hide_on_key_press false; hyprctl dispatch submap cursor

# ===========================================
# LAYER RULES
# ===========================================

# Vicinae blur
layerrule {
  name = layerrule-1
  blur = on
  ignore_alpha = 0
  match:namespace = vicinae
}

